<!DOCTYPE html>
<html><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="stylesheet" href="https://lajunta.github.io/hugoblog/css/tailwind.min.min.457dc15ac9728ea8ce51b6ee57135c381611688c4abea2ae8ffded28e7a37daf.css">
  
  <link rel="stylesheet" href="https://lajunta.github.io/hugoblog/css/style.min.c0ad41ced7523ea8a0f933c901c8da089bf513df82f78df868dfee4406c85f57.css">
  <title>Document</title>
</head><body><header class="bg-white mb-3">
  <div class="container mx-auto px-10">
    <nav class="flex h-20 items-center justify-between">
      <a href=https://lajunta.github.io/hugoblog/ class="text-4xl">文章中心</a>

      <div>
        
        <a href="/hugoblog/categories/" class="ml-5">目录</a>
        
        <a href="/hugoblog/tags/" class="ml-5">标签</a>
        
      </div>
    </nav>
  </div>
</header><div class="container mx-auto p-10 bg-white ">
<div class="text-2xl text-gray-700 mb-4">Samba Guest Write</div>
<div class="mb-3 text-xs">
  <span datetime=" 2021-04-10 09:26" class="text-gray-300">2021-04-10 09:26</span>
  <span class="mr-4 text-gray-300 italic"> <a href=/linux/sysadmin/>linux/sysadmin/</a></span>
</div>
<hr>
<h2 id="samba-server-for-guest-user">Samba Server for guest user</h2>
<p><strong>smb.conf</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># Global parameters</span>
<span style="color:#ff79c6">[</span>global<span style="color:#ff79c6">]</span>
  server <span style="color:#8be9fd;font-style:italic">string</span> <span style="color:#ff79c6">=</span> Temp Samba Server
  netbios <span style="color:#8be9fd;font-style:italic">name</span> <span style="color:#ff79c6">=</span> R33 
  server <span style="color:#8be9fd;font-style:italic">role</span> <span style="color:#ff79c6">=</span> standalone server
  map to <span style="color:#8be9fd;font-style:italic">guest</span> <span style="color:#ff79c6">=</span> bad user
  guest <span style="color:#8be9fd;font-style:italic">account</span> <span style="color:#ff79c6">=</span> zxy
  create <span style="color:#8be9fd;font-style:italic">mode</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">664</span> 
  inherit <span style="color:#8be9fd;font-style:italic">owner</span><span style="color:#ff79c6">=</span>yes 
  inherit <span style="color:#8be9fd;font-style:italic">permissions</span><span style="color:#ff79c6">=</span>yes

<span style="color:#ff79c6">[</span>文件收集<span style="color:#ff79c6">]</span>
  <span style="color:#8be9fd;font-style:italic">path</span> <span style="color:#ff79c6">=</span> /var/collect
  <span style="color:#8be9fd;font-style:italic">read</span> <span style="color:#8be9fd;font-style:italic">only</span> <span style="color:#ff79c6">=</span> no
  <span style="color:#8be9fd;font-style:italic">writeable</span> <span style="color:#ff79c6">=</span> yes 
  write <span style="color:#8be9fd;font-style:italic">list</span> <span style="color:#ff79c6">=</span> zxy
  <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#ff79c6">=</span> yes
  guest <span style="color:#8be9fd;font-style:italic">ok</span> <span style="color:#ff79c6">=</span> yes
  force <span style="color:#8be9fd;font-style:italic">user</span> <span style="color:#ff79c6">=</span> zxy
  create <span style="color:#8be9fd;font-style:italic">mask</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0644</span>
  directory <span style="color:#8be9fd;font-style:italic">mask</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1777</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="file-system-operations">File System operations</h3>
<p>设置文件或者文件夹 不是文件夹所在组和用户</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chown -R root:emptygroup * /path/to/dir/
</code></pre></td></tr></table>
</div>
</div><p>设置 sticky 位为1:</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chmod -R <span style="color:#bd93f9">1777</span> /path/to/dir/
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">inherit <span style="color:#8be9fd;font-style:italic">owner</span><span style="color:#ff79c6">=</span>yes
inherit <span style="color:#8be9fd;font-style:italic">permissions</span><span style="color:#ff79c6">=</span>yes
</code></pre></td></tr></table>
</div>
</div>

    </div></body>

</html>