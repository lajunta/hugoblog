<!DOCTYPE html>
<html><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="stylesheet" href="https://lajunta.vercel.app/css/tailwind.min.min.d9a9ae40100d24a1171de2958f7a2561352df9d0606cdb4d6ea39e37d79f150e.css">
  
  <link rel="stylesheet" href="https://lajunta.vercel.app/css/style.min.c0ad41ced7523ea8a0f933c901c8da089bf513df82f78df868dfee4406c85f57.css">
  <title>Document</title>
</head><body><header class="bg-white mb-3">
  <div class="container mx-auto px-10">
    <nav class="flex h-20 items-center justify-between">
      <a href=https://lajunta.vercel.app/ class="text-4xl">文章中心</a>

      <div>
        
        <a href="/categories/" class="ml-5">目录</a>
        
        <a href="/tags/" class="ml-5">标签</a>
        
      </div>
    </nav>
  </div>
</header><div class="container mx-auto p-10 bg-white ">
<div class="text-2xl text-gray-700 mb-4">Add Match Group</div>
<div class="mb-3 text-xs">
  <span datetime=" 2021-04-06 14:15" class="text-gray-300">2021-04-06 14:15</span>
  <span class="mr-4 text-gray-300 italic"> <a href=/linux/commands/>linux/commands/</a></span>
</div>
<hr>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6"></span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[[</span> <span style="color:#8be9fd;font-style:italic">$1</span> <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;&#34;</span> <span style="color:#ff79c6">||</span> <span style="color:#8be9fd;font-style:italic">$2</span> <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;&#34;</span> <span style="color:#ff79c6">]]</span> ; <span style="color:#ff79c6">then</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;格式为: addgroup.sh 名称 编号&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exit</span> <span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">gname</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$1$2</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">gnum</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$2</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">cms</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">gnum</span><span style="color:#f1fa8c">}</span>_CMS
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">layout</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">gnum</span><span style="color:#f1fa8c">}</span>_Layout
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">design</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">gnum</span><span style="color:#f1fa8c">}</span>_Design
</span></span><span style="display:flex;"><span>userdel -r <span style="color:#8be9fd;font-style:italic">$gname</span>
</span></span><span style="display:flex;"><span>rm -rf /home/<span style="color:#8be9fd;font-style:italic">$gname</span>/
</span></span><span style="display:flex;"><span>useradd -m -p <span style="color:#f1fa8c">&#34;</span><span style="color:#ff79c6">$(</span>openssl passwd -1 <span style="color:#8be9fd;font-style:italic">$gname</span><span style="color:#ff79c6">)</span><span style="color:#f1fa8c">&#34;</span> -s /bin/sh <span style="color:#8be9fd;font-style:italic">$gname</span>
</span></span><span style="display:flex;"><span>chmod a-w <span style="color:#8be9fd;font-style:italic">$gname</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#sudo -i -u $gname sh -c &#34;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#sudo -i -u $gname sed -i &#34;s/robbyrussell/frisk/g&#34; /home/$gname/.zshrc</span>
</span></span><span style="display:flex;"><span>sudo -u <span style="color:#8be9fd;font-style:italic">$gname</span> mkdir -p /home/<span style="color:#8be9fd;font-style:italic">$gname</span>/<span style="color:#8be9fd;font-style:italic">$cms</span>
</span></span><span style="display:flex;"><span>sudo -u <span style="color:#8be9fd;font-style:italic">$gname</span> mkdir -p /home/<span style="color:#8be9fd;font-style:italic">$gname</span>/<span style="color:#8be9fd;font-style:italic">$layout</span>
</span></span><span style="display:flex;"><span>sudo -u <span style="color:#8be9fd;font-style:italic">$gname</span> mkdir -p /home/<span style="color:#8be9fd;font-style:italic">$gname</span>/<span style="color:#8be9fd;font-style:italic">$design</span>
</span></span><span style="display:flex;"><span>grep -qxF <span style="color:#8be9fd;font-style:italic">$gname</span> /etc/vsftpd.chroot_list <span style="color:#ff79c6">||</span> <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$gname</span> &gt;&gt; /etc/vsftpd.chroot_list
</span></span><span style="display:flex;"><span>grep -qxF <span style="color:#8be9fd;font-style:italic">$gname</span> /etc/vsftpd.userlist <span style="color:#ff79c6">||</span> <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$gname</span> &gt;&gt; /etc/vsftpd.userlist
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">content</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>cat <span style="color:#f1fa8c">&lt;&lt;- DOC
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">Alias /$cms /home/$gname/$cms
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">Alias /$layout /home/$gname/$layout
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">Alias /$design /home/$gname/$design
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;Directory /home/$gname/$cms&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Options FollowSymLinks
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    AllowOverride Limit Options FileInfo
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    DirectoryIndex index.php  index.html index.htm
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Order allow,deny
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Require all granted
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Allow from all
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;/Directory&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;Directory /home/$gname/$cms/wp-content&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Options FollowSymLinks
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Require all granted
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Order allow,deny
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Allow from all
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;/Directory&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;Directory /home/$gname/$layout&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    AllowOverride Limit Options FileInfo
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Order allow,deny
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Require all granted
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Allow from all
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;/Directory&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;Directory /home/$gname/$design&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    AllowOverride Limit Options FileInfo
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Order allow,deny
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Require all granted
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Allow from all
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&lt;/Directory&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">DOC</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">sitepath</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;/etc/apache2/sites-available/</span><span style="color:#8be9fd;font-style:italic">$gname</span><span style="color:#f1fa8c">.conf&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$content</span><span style="color:#f1fa8c">&#34;</span> &gt; <span style="color:#8be9fd;font-style:italic">$sitepath</span> 
</span></span><span style="display:flex;"><span>a2ensite <span style="color:#8be9fd;font-style:italic">$gname</span>
</span></span><span style="display:flex;"><span>systemctl reload apache2
</span></span><span style="display:flex;"><span>systemctl reload vsftpd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mysql -e <span style="color:#f1fa8c">&#34;create database if not exists </span><span style="color:#8be9fd;font-style:italic">$gname</span><span style="color:#f1fa8c">;&#34;</span>
</span></span><span style="display:flex;"><span>mysql -e <span style="color:#f1fa8c">&#34;CREATE USER if not exists &#39;</span><span style="color:#8be9fd;font-style:italic">$gname</span><span style="color:#f1fa8c">&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;</span><span style="color:#8be9fd;font-style:italic">$gname</span><span style="color:#f1fa8c">&#39;;&#34;</span>
</span></span><span style="display:flex;"><span>mysql -e <span style="color:#f1fa8c">&#34;GRANT ALL PRIVILEGES ON </span><span style="color:#8be9fd;font-style:italic">$gname</span><span style="color:#f1fa8c">.* TO &#39;</span><span style="color:#8be9fd;font-style:italic">$gname</span><span style="color:#f1fa8c">&#39;@&#39;localhost&#39;;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f1fa8c">```</span>bash
</span></span></code></pre></td></tr></table>
</div>
</div>

    </div></body>

</html>